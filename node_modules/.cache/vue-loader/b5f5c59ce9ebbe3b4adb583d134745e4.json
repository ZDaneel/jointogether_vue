{"remainingRequest":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/src/views/RetrievePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/src/views/RetrievePassword.vue","mtime":1654478782470},{"path":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zdaneel/Downloads/Java/JavaEE/demo/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAvLzE5MjAwMTMwMjI0QHBvc3QudXN0cy5lZHUuY24KICBuYW1lOiAiUmV0cmlldmVQYXNzd29yZCIsCiAgZGF0YSgpIHsKICAgIGxldCBjaGVja0VtYWlsID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBjb25zdCBtYWlsUmVnID0gL14oW2EtekEtWjAtOV8tXSkrQChbYS16QS1aMC05Xy1dKSsoLlthLXpBLVowLTlfLV0pKy8KICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+mCrueuseS4jeiDveS4uuepuicpKQogICAgICB9CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmIChtYWlsUmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICBjYWxsYmFjaygpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5q2j56Gu55qE6YKu566x5qC85byPJykpCiAgICAgICAgfQogICAgICB9LCAxMDApCiAgICB9CiAgICByZXR1cm4gewogICAgICBlMTogMSwKICAgICAgdXNlcjoge30sCiAgICAgIHB3ZEZyb206IHt9LAogICAgICBtc2c6ICLngrnlh7vojrflj5bpqozor4HnoIEiLAogICAgICBmbGFnOiBmYWxzZSwKICAgICAgdmVyQ29kZTogIiIsCiAgICAgIEVtYWlsOiAiIiwKICAgICAgcnVsZXM6IHsKICAgICAgICBlbWFpbDogWwogICAgICAgICAge3ZhbGlkYXRvcjogY2hlY2tFbWFpbCwgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0KICAgICAgfSwKICAgICAgcnVsZXMyOiB7CiAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJ30sCiAgICAgICAgICB7bWluOiAxLCBtYXg6IDIwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEg5YiwIDIwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICBdLAogICAgICAgIGNvbmZpcm1QYXNzd29yZDogWwogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInfSwKICAgICAgICAgIHttaW46IDEsIG1heDogMjAsIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMjAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgIF0sCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEF1dGhDb2RlKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7ICAvLyDooajljZXmoKHpqozlkIjms5UKICAgICAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvdXNlci9jaGVja0VtYWlsIiwgdGhpcy51c2VyKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgICAgICAgICAvL3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6YKu566x5a2Y5ZyoIikKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgdGhpcy52ZXJDb2RlID0gcmVzLmRhdGEudmVyQ29kZQogICAgICAgICAgICAgIHRoaXMuRW1haWwgPSByZXMuZGF0YS5lbWFpbAogICAgICAgICAgICAgIGNvbnN0IF90aGlzID0gdGhpczsvL++8ge+8geWdke+8gXNldEludGVydmFs5Lit55qEdGhpc+aMh+WQkemXrumimAogICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7IC8v77yB5oyJ6ZKu5LiN5Y+v6YeN5aSN54K55Ye7CiAgICAgICAgICAgICAgbGV0IHRpbWUgPSA5MDsvL+WumuS5ieaXtumXtOWPmOmHjyAxNTBzCiAgICAgICAgICAgICAgbGV0IHRpbWVyID0gbnVsbDsvL+WumuS5ieWumuaXtuWZqAogICAgICAgICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKHRpbWUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubXNnID0gIumHjeaWsOiOt+WPlumqjOivgeeggSI7CiAgICAgICAgICAgICAgICAgIF90aGlzLmZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7Ly/muIXpmaTlrprml7blmagKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1zZyA9IHRpbWUgKyAi56eS5ZCO6YeN5paw6I635Y+WIjsKICAgICAgICAgICAgICAgICAgdGltZS0tOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tDb2RlKCkgewogICAgICBpZiAodGhpcy52ZXJDb2RlICE9IG51bGwgJiYgdGhpcy51c2VyLmNvZGUgIT0gbnVsbCkgewogICAgICAgIGlmICh0aGlzLnZlckNvZGUgPT09IHRoaXMudXNlci5jb2RlKSB7CiAgICAgICAgICB0aGlzLmUxID0gMgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpqozor4HnoIHplJnor68iKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpqozor4HnoIHkuI3og73kuLrnqboiKQogICAgICB9CiAgICB9LAogICAgY2hhbmdlUFdEKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtMiddLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgeyAgLy8g6KGo5Y2V5qCh6aqM5ZCI5rOVCiAgICAgICAgICBpZiAodGhpcy5wd2RGcm9tLnBhc3N3b3JkICE9PSB0aGlzLnB3ZEZyb20uY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4pOasoei+k+WFpeeahOWvhueggeS4jeS4gOiHtCIpCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5wd2RGcm9tLmVtYWlsID0gdGhpcy5FbWFpbAogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnB3ZEZyb20pCiAgICAgICAgICB0aGlzLnJlcXVlc3QucG9zdCgiL3VzZXIvcmVzZXRQYXNzd29yZCIsIHRoaXMucHdkRnJvbSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICAgICAgLy90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumHjee9ruaIkOWKnyIpCiAgICAgICAgICAgICAgdGhpcy5lMSA9IDMKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["RetrievePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RetrievePassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div\n        style=\"margin: 200px auto; background-color: #fff; width: 550px; height: 400px; padding: 20px; border-radius: 10px\">\n      <div style=\"margin: 20px 0; text-align: center; font-size: 24px\"><b>找 回 密 码</b></div>\n      <v-stepper v-model=\"e1\">\n        <v-stepper-header>\n          <v-stepper-step :complete=\"e1 > 1\" step=\"1\">身份验证</v-stepper-step>\n          <v-divider></v-divider>\n          <v-stepper-step :complete=\"e1 > 2\" step=\"2\">密码重置</v-stepper-step>\n          <v-divider></v-divider>\n          <v-stepper-step step=\"3\">重置完成</v-stepper-step>\n        </v-stepper-header>\n\n        <v-stepper-items>\n          <v-stepper-content step=\"1\">\n            <!-- 步骤一的内容-->\n            <el-form ref=\"form\" :rules=\"rules\" :model=\"user\">\n              <el-form-item prop=\"email\">\n                <el-input placeholder=\"请输入邮箱\" size=\"medium\" style=\"margin: 5px 0; width: 70%\"\n                          prefix-icon=\"el-icon-message\" v-model=\"user.email\"></el-input>\n                <el-button type=\"primary\" size=\"small\" :disabled=\"flag\" @click=\"getAuthCode\">{{ msg }}</el-button>\n              </el-form-item>\n              <el-form-item prop=\"code\">\n                <el-input placeholder=\"请输入验证码\" size=\"medium\" style=\"margin: 5px 0\" v-model=\"user.code\"></el-input>\n              </el-form-item>\n              <el-form-item style=\"margin: 5px 0; text-align: center\">\n                <el-button type=\"primary\" size=\"small\" autocomplete=\"off\" @click=\"checkCode\">下一步</el-button>\n                <el-button size=\"small\" autocomplete=\"off\" @click=\"$router.push('/login')\">返回登录</el-button>\n              </el-form-item>\n            </el-form>\n          </v-stepper-content>\n\n          <v-stepper-content step=\"2\">\n            <!-- 步骤二的内容-->\n            <el-form ref=\"form2\" :rules=\"rules2\" :model=\"pwdFrom\">\n              <el-form-item prop=\"password\">\n                <el-input placeholder=\"请输入密码\" size=\"medium\" style=\"margin: 5px 0\" prefix-icon=\"el-icon-lock\"\n                          show-password v-model=\"pwdFrom.password\"></el-input>\n              </el-form-item>\n              <el-form-item prop=\"confirmPassword\">\n                <el-input placeholder=\"请确认密码\" size=\"medium\" style=\"margin: 5px 0\" prefix-icon=\"el-icon-lock\"\n                          show-password v-model=\"pwdFrom.confirmPassword\"></el-input>\n              </el-form-item>\n              <el-form-item style=\"margin: 5px 0; text-align: center\">\n                <el-button type=\"primary\" size=\"small\" autocomplete=\"off\" @click=\"changePWD\">下一步</el-button>\n                <el-button size=\"small\" autocomplete=\"off\" @click=\"$router.push('/login')\">返回登录</el-button>\n              </el-form-item>\n            </el-form>\n          </v-stepper-content>\n\n          <v-stepper-content step=\"3\">\n            <!-- 步骤三的内容-->\n            <div style=\"text-align: center\">\n              <div>\n                <br><br>密码重置完成，请重新登录!<br><br><br><br>\n              </div>\n              <el-button type=\"primary\" size=\"middle\" @click=\"$router.push('/login')\">重新登录</el-button>\n            </div>\n          </v-stepper-content>\n\n        </v-stepper-items>\n      </v-stepper>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  //19200130224@post.usts.edu.cn\n  name: \"RetrievePassword\",\n  data() {\n    let checkEmail = (rule, value, callback) => {\n      const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/\n      if (!value) {\n        return callback(new Error('邮箱不能为空'))\n      }\n      setTimeout(() => {\n        if (mailReg.test(value)) {\n          callback()\n        } else {\n          callback(new Error('请输入正确的邮箱格式'))\n        }\n      }, 100)\n    }\n    return {\n      e1: 1,\n      user: {},\n      pwdFrom: {},\n      msg: \"点击获取验证码\",\n      flag: false,\n      verCode: \"\",\n      Email: \"\",\n      rules: {\n        email: [\n          {validator: checkEmail, trigger: 'blur'}\n        ]\n      },\n      rules2: {\n        password: [\n          {required: true, message: '请输入密码', trigger: 'blur'},\n          {min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur'}\n        ],\n        confirmPassword: [\n          {required: true, message: '请输入密码', trigger: 'blur'},\n          {min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur'}\n        ],\n      }\n    }\n  },\n  methods: {\n    getAuthCode() {\n      this.$refs['form'].validate((valid) => {\n        if (valid) {  // 表单校验合法\n          this.request.post(\"/user/checkEmail\", this.user).then(res => {\n            if (res.code === '200') {\n              //this.$message.success(\"邮箱存在\")\n              console.log(res)\n              this.verCode = res.data.verCode\n              this.Email = res.data.email\n              const _this = this;//！！坑！setInterval中的this指向问题\n              this.flag = true; //！按钮不可重复点击\n              let time = 90;//定义时间变量 150s\n              let timer = null;//定义定时器\n              timer = setInterval(function () {\n                if (time === 0) {\n                  _this.msg = \"重新获取验证码\";\n                  _this.flag = false;\n                  clearInterval(timer);//清除定时器\n                } else {\n                  _this.msg = time + \"秒后重新获取\";\n                  time--;\n                }\n              }, 1000)\n            } else {\n              this.$message.error(res.msg)\n            }\n          })\n        }\n      });\n    },\n    checkCode() {\n      if (this.verCode != null && this.user.code != null) {\n        if (this.verCode === this.user.code) {\n          this.e1 = 2\n        } else {\n          this.$message.error(\"验证码错误\")\n        }\n      } else {\n        this.$message.error(\"验证码不能为空\")\n      }\n    },\n    changePWD() {\n      this.$refs['form2'].validate((valid) => {\n        if (valid) {  // 表单校验合法\n          if (this.pwdFrom.password !== this.pwdFrom.confirmPassword) {\n            this.$message.error(\"两次输入的密码不一致\")\n            return false\n          }\n          this.pwdFrom.email = this.Email\n          //console.log(this.pwdFrom)\n          this.request.post(\"/user/resetPassword\", this.pwdFrom).then(res => {\n            if (res.code === '200') {\n              //this.$message.success(\"重置成功\")\n              this.e1 = 3\n            } else {\n              this.$message.error(res.msg)\n            }\n          })\n        }\n      });\n    }\n  },\n}\n</script>\n\n<style>\n.wrapper {\n  height: 100vh;\n  background:\n      linear-gradient(red, transparent),\n      linear-gradient(to top left, lime, transparent),\n      linear-gradient(to top right, blue, transparent);\n  background-blend-mode: screen;\n  overflow: hidden;\n}\n</style>"]}]}